/*!
 * Material Modal v0.1.2
 * Copyright 2015 Mark Rabey <mark@markrabey.com> (markrabey.com)
 * Licensed under the MIT license
 */


var Modal=function(a,b){"use strict";var c={qsa:function(b){return a.querySelectorAll(b)}},d=c.qsa(".modal__trigger"),e=c.qsa(".modal"),f=c.qsa(".modal__bg"),g=c.qsa(".modal__content"),h=c.qsa(".modal__close"),i=b,j=!1,k=400,l=function(b){b.preventDefault();var c=this,d=c.dataset.modal,e=d.length,f=d.substring(1,e),g=a.getElementById(f);m(c,g)},m=function(c,d){var e=a.getElementById("modal__temp");if(null===e){var f=a.createElement("div");f.id="modal__temp",c.appendChild(f),f.style.backgroundColor=b.getComputedStyle(c).backgroundColor,n(c,d,f)}},n=function(a,c,d){var e,f,g,h,j=a.getBoundingClientRect(),l=c,m=l.querySelector(".modal__content").getBoundingClientRect(),n=i.innerWidth/2,p=i.innerHeight/2;a.classList.add("modal__trigger--active"),g=m.width/j.width,h=m.height/j.height,g=g.toFixed(3),h=h.toFixed(3),e=Math.round(n-j.left-j.width/2),f=Math.round(p-j.top-j.height/2),l.classList.contains("modal--align-top")&&(f=Math.round(m.height/2+m.top-j.top-j.height/2)),a.style.transform="translate("+e+"px, "+f+"px)",a.style.webkitTransform="translate("+e+"px, "+f+"px)",d.style.backgroundColor="#fff",d.style.transform="scale("+g+","+h+")",d.style.webkitTransform="scale("+g+","+h+")",b.setTimeout(function(){b.requestAnimationFrame(function(){o(l,d)})},k)},o=function(a,b){function c(){b.style.opacity="0",d.removeEventListener("transitionend",c,!1)}if(!j){var d=a.querySelector(".modal__content");a.classList.add("modal--active"),d.classList.add("modal__content--active"),d.addEventListener("transitionend",c,!1),j=!0}},p=function(c){function f(){setTimeout(function(){b.requestAnimationFrame(function(){l.remove()})},k-50)}var h,i=c.target,l=a.getElementById("modal__temp");if(console.log(i),j&&i.classList.contains("modal__bg")||i.classList.contains("modal__close")){for(c.preventDefault(),c.stopImmediatePropagation(),l.style.opacity="1",l.removeAttribute("style"),h=0;h<d.length;h++)d[h].style.transform="none",d[h].style.webkitTransform="none",d[h].classList.remove("modal__trigger--active");for(h=0;h<e.length;h++)e[h].classList.remove("modal--active"),g[h].classList.remove("modal__content--active");l.addEventListener("transitionend",f,!1),j=!1}},q=function(){var a;for(a=0;a<d.length;a++)d[a].addEventListener("click",l,!1);for(a=0;a<h.length;a++)h[a].addEventListener("click",p,!1);for(a=0;a<f.length;a++)f[a].addEventListener("click",p,!1)},r=function(){q()};return{init:r}}(document,window);Modal.init();