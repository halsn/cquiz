var Modal=function(t,e){"use strict";var n={qsa:function(e){return t.querySelectorAll(e)}},o=n.qsa(".modal__trigger"),a=n.qsa(".modal"),i=n.qsa(".modal__bg"),r=n.qsa(".modal__content"),l=n.qsa(".modal__close"),s=e,d=!1,c=400,m=function(e){e.preventDefault();var n=this,o=n.dataset.modal,a=o.length,i=o.substring(1,a),r=t.getElementById(i);u(n,r)},u=function(n,o){var a=t.getElementById("modal__temp");if(null===a){var i=t.createElement("div");i.id="modal__temp",n.appendChild(i),i.style.backgroundColor=e.getComputedStyle(n).backgroundColor,g(n,o,i)}},g=function(t,n,o){var a,i,r,l,d=t.getBoundingClientRect(),m=n,u=m.querySelector(".modal__content").getBoundingClientRect(),g=s.innerWidth/2,v=s.innerHeight/2;t.classList.add("modal__trigger--active"),r=u.width/d.width,l=u.height/d.height,r=r.toFixed(3),l=l.toFixed(3),a=Math.round(g-d.left-d.width/2),i=Math.round(v-d.top-d.height/2),m.classList.contains("modal--align-top")&&(i=Math.round(u.height/2+u.top-d.top-d.height/2)),t.style.transform="translate("+a+"px, "+i+"px)",t.style.webkitTransform="translate("+a+"px, "+i+"px)",o.style.backgroundColor="#fff",o.style.transform="scale("+r+","+l+")",o.style.webkitTransform="scale("+r+","+l+")",e.setTimeout(function(){e.requestAnimationFrame(function(){f(m,o)})},c)},f=function(t,e){function n(){e.style.opacity="0",o.removeEventListener("transitionend",n,!1)}if(!d){var o=t.querySelector(".modal__content");t.classList.add("modal--active"),o.classList.add("modal__content--active"),o.addEventListener("transitionend",n,!1),d=!0}},v=function(n){function i(){setTimeout(function(){e.requestAnimationFrame(function(){m.remove()})},c-50)}var l,s=n.target,m=t.getElementById("modal__temp");if(console.log(s),d&&s.classList.contains("modal__bg")||s.classList.contains("modal__close")){for(n.preventDefault(),n.stopImmediatePropagation(),m.style.opacity="1",m.removeAttribute("style"),l=0;l<o.length;l++)o[l].style.transform="none",o[l].style.webkitTransform="none",o[l].classList.remove("modal__trigger--active");for(l=0;l<a.length;l++)a[l].classList.remove("modal--active"),r[l].classList.remove("modal__content--active");m.addEventListener("transitionend",i,!1),d=!1}},_=function(){var t;for(t=0;t<o.length;t++)o[t].addEventListener("click",m,!1);for(t=0;t<l.length;t++)l[t].addEventListener("click",v,!1);for(t=0;t<i.length;t++)i[t].addEventListener("click",v,!1)},h=function(){_()};return{init:h}}(document,window);Modal.init();